# Event-QA
[evencqa.l3s.uni-hannover.de](http://eventcqa.l3s.uni-hannover.de/)

Event-QA is a Dataset for answering complex Event-Centric questions over Knowledge Graphs (KGs). 
We target [EventKG](http://eventkg.l3s.uni-hannover.de/), a recently proposed Event-Centric KG. 
Event-QA contains 1000 semantic queries and the corresponding verbalisations. The queries are generated by 
random-walk sub-graph traversal. When possible, SPARQL queries were translated to DBpedia knowledge graph.

## Benchmark queries ##

Our dataset follows the [QALD](http://2018.nliwod.org/challenge) Challenge JSON structure.

Query instance example extracted from Event-QA:

```
{
	"dataset": {

		"prefix": "prefix used by EventKG",
		"id": "event-qa-train-english-eventkg"
	},
	"questions": [{
		"knowledgegraph": "eventkg",
		"hybrid": "false",
		"question": [{
			"string": "What was Hans Mortier's federation which promoted Extreme Rules 
			in 2010?",
			"language": "en"
		}, {
			"string": "Qual era a federação de Hans Mortier, que foi a mesma que 
			promoveu o Extreme Rules em 2010?",
			"language": "pt"
		}, {
			"string": "Welchem Verband, der auch das Extreme-Rules-Event promotet hat, 
			gehört Hans Mortier an?",
			"language": "de"
		}],
		"query": {
			"sparql": "SELECT DISTINCT ?entity1 WHERE { ?relation1 rdf:object ?entity1 . 
			?relation1 rdf:subject ?event1 . ?relation1 sem:roleType dbo:promotion . 
			?relation2 rdf:object ?entity1 . ?relation2 rdf:subject ?entity2 . 
			?relation2 sem:roleType dbo:federation . 
			?event1 owl:sameAs <http://dbpedia.org/resource/Extreme_Rules_(2010)> . 
			?entity2 owl:sameAs <http://dbpedia.org/resource/Hans_Mortier> . } "
		},
		"onlyDbo": "true",
		"answerType": "resource",
		"aggregation": "false",
		"id": 1,
		"answers": [{
			"head": {
				"vars": ["entity1"]
			},
			"results": {
				"bindings": [{
					"entity1": {
						"type": "uri",
						"value": "http://eventKG.l3s.uni-hannover.de/resource/entity_1717117"
					}
				}]
			}
		}]
	}]
}
```

## Configuration ##

The configuration file (/src/main/resources/config.properties) points to the input data and the algorithm parameters. 


```
data_folder=/home/.../data/
max_queries=100
max_relations=200000 
format=json
# limit for relations: 668457
```

#### Input data 
The input data files are compressed in one file [input.zip](http://eventcqa.l3s.uni-hannover.de/dataset/input.zip). Extract them to your home folder and
specify the path in the config.properties file. The files are composed of DBpedia predicates and relations, where:

Name | Description
:-----|:-------------
**relations_entities_other_dbo.nq** | list of relations with entities
**relations_other_dbo.nq** | list of relations with events and entities
**types_dbpedia.nq** | list of dbpedia properties
**entities_filter.nq** | list of entities ids with values
**events_filter.nq** | list of events ids with values

In the config file, the "max_queries" parameter is the maximum number of queries to be obtained. 
The parameter "max_relations" is the maximum number of relations from the graph to be used. 
These relations are starting points, from where the algorithm begins to traverse the sub-graphs and generates the queries. 
The parameter "format" is the output format of the queries. 

#### Generate queries

In order to generate the queries, please follow the steps:

- **Clone** this project in your computer
- **Enter** in the project directory and execute:
```
mvn clean package
```
- You should see this ".jar" file in your /target directory: 

```
EventKG.graphGenerator-0.0.1-SNAPSHOT-jar-with-dependencies.jar
```

- **Execute** the jar file:

```
java -jar EventKG.graphGenerator-0.0.1-SNAPSHOT-jar-with-dependencies.jar
```
- **Wait** until the program concludes the execution
- **Output** is the file  "queries_machine.json" with the queries generated

#### Output

As an example, we show the semantic queries in a [human readable](http://eventcqa.l3s.uni-hannover.de/queries_human.html) and [machine readable](http://eventcqa.l3s.uni-hannover.de/queries_machine.json) form. 

#### License ####

This project is licensed under the terms of the MIT license (see LICENSE.txt).
